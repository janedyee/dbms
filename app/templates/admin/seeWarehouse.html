{% extends "admin/bases.html" %}
 {% import "admin/fy.html" as pg %}

{% block content %}
    <style>
        .x-body.page-container {
            margin: 0;
            max-width: none;
        }

        .warehouse-table {
            border: 1px solid #e6e6e6;
        }

        .warehouse-table th,
        .warehouse-table td {
            border: 1px solid #e6e6e6;
        }
    </style>
    <div class="x-body page-container">
<div class="layui-row">
               <form class="layui-form layui-col-md12 x-so" method="post">
            {{form.name}}
            {{form.gys}}

         {{form.csrf_token}}
          {{form.submit}}
        </form>
      </div>

      <table class="layui-table warehouse-table">
        <thead>

          <tr>

            <th>商品名称</th>
            <th>商品数量</th>
            <th>商品单价</th>
            <th>供应商名称</th>
            <th >操作</th>
            </tr>

        </thead>
        <tbody>

            {% for i in page_data.items %}
          <tr>


            <td>{{i.warehouse_goods_name}}</td>
             <td>{{i.warehouse_goods_num}}</td>
            <td>{{i.goods_price}}</td>
            <td>{{i.warehouse_supplier_name}}</td>
            <td class="td-manage">

              <a class="layui-btn layui-btn-xs layui-btn-danger" title="删除" onclick="member_del(this,'{{i.warehouse_id}}')" href="javascript:;">删除</a>
            </td>
          </tr>
         {% endfor %}
        </tbody>
      </table>

     {{pg.page(page_data,'admin.seeWarehouse')}}

    </div>
    <script>

          function member_del(obj, id) {
              console.log(id)
              layer.confirm('确认要删除吗？', function (index) {
                  //发异步删除数据
                  $.get(
                      'http://127.0.0.1/admin/dellwarehouse?id=' + id,

                      function (html) {
                           location.reload();
                      }
                  );
                  $(obj).parents("tr").remove();
                  layer.msg('已删除!', {icon: 1, time: 1000});
              });
          }




    </script>

{% endblock %}